/*! sole 09-07-2013 */
var sole=window.sole||{};sole.ulib={},function(a){a=a||{},function(a){var b=function(a){var b=[],c=function(){},d={},e=null,f={},g=!1,h=!1,i={INVALID_TRIGGER:"InvalidTrigger"},j={},k=function(a){var b=[];return j.hasOwnProperty(a)&&(b=j[a]),b},l=null;this.reset=function(){b=[],j={}},this.getCore=function(){return l},this.hasEvent=function(a){var c;for(c=0;c<b.length;c+=1)if(b[c]===a)return!0;return!1},this.on=function(a,b){var c=this.hasEvent(a);return!c&&g||(j[a]=j[a]||[],j[a].push(b),c)?!1:(this.addEventType({type:a}),!0)},this.off=function(a,b){var c,d=!1;if(this.hasEvent(a)&&j[a]){for(c=0;c<j[a].length;c+=1)if(b){if(j[a][c]===b){j[a].splice(c,1),d=!0;break}}else j[a]=[],d=!0;return d}return!1},this.trigger=function(){var a,b,g,j=arguments,m=[],n=j[0],o=d[n],p=!0,q=function(a,b,d){try{l?a.apply(l({eventName:d}),b):a.apply(a,b)}catch(e){c(e)}},r=function(a,b,c){f[o.defer].push({func:a,type:b,args:c})};for(a=1;a<j.length;a+=1)m.push(j[a]);if(this.hasEvent(n)){for(g=k(n),a=0;a<g.length;a+=1)if(o.once&&o.hasRunOnce&&(p=!1),o.nonconsec&&e===n&&(p=!1),o.after&&e!==o.after&&(p=!1),o.defer&&e!==o.defer&&(p=!1,f[o.defer]=f[o.defer]||[],r(g[a],n,m,l)),p&&(q(g[a],m,n,l),o.once&&(o.hasRunOnce=!0)),f[n])for(b=0;b<f[n].length;b+=1)q(f[n][b].func,f[n][b].args,f[n][b].type,l);e=n}else if(h)throw i.INVALID_TRIGGER+": "+n},this.addEventType=function(a){var c=d[a.type]||{};d[a.type]={once:a.once||c.once||!1,nonconsec:a.nonconsec||c.nonconsec||!1,after:a.after||c.after||null,defer:a.defer||c.defer||null},b.push(a.type)},this.getEventTypes=function(){return b},this.removeEventType=function(a){var c;for(c=0;c<b.length;c+=1)if(b[c]===a)return b.splice(c,1),d[a]=null,!0;return!1},a&&(void 0!==a.core&&(l=a.core),void 0!==a.events&&(b=a.events),void 0!==a.eventTypeCheck&&(g=!!a.eventTypeCheck),void 0!==a.eventListeners&&(j=a.eventListeners),void 0!==a.eventException&&(h=a.eventException),void 0!==a.triggerErrorHandler&&(c=a.triggerErrorHandler))};a.pubsub=new b,a.Pubsub=b}(a),a=a||{},function(a){var b=function(b){b=b||{};var d,e,f={},g={},h=!0,i={PluginAlreadyExists:"Plugin already exists, set pluginOverride to true to override, plugin name: ",PluginDoesnotExist:"Plugin not found",TriggerError:"Event could not be triggered in: "},j=b.triggerPluginErrors||!0,k=function(a,b){return function(){a.apply(b,arguments)}},l=function(a,b){j&&window.console&&console.error&&(i.hasOwnProperty(a)?console.error("ulib "+a+" - "+i[a]+(b?b:"")):console.error("ulib "+a+" - "+i.TriggerError+(b?b:"")))},m=function(a){var b,c={};for(b in o)o.hasOwnProperty(b)&&(c[b]=o[b]);for(b in a)a.hasOwnProperty(b)&&(c[b]=a[b]);return void 0!==typeof a.name?c.pluginName=a.name:l("PluginDoesnotExist"," name not specified"),c},n=b.pubsub||new a.Pubsub({core:m,eventException:!0,triggerErrorHandler:function(a){l("TriggerError",e+"\n"+a)}}),o={expose:function(a,b){return k(a,b)},get:function(a){return a?f[a]:f},set:function(a,b){f[a]=b},on:function(a,b,c){void 0!==c&&(e=c);var d=e,f=function(){var a=n.getCore();e=d,b.apply(a?a():n,arguments)};s[this.pluginName]=s[this.pluginName]||[],s[this.pluginName].push({name:a,func:f}),n.on(a,f)},off:k(n.off,n),trigger:k(n.trigger,n)},p=function(a){capEve=a.type.substring(0,1).toUpperCase()+a.type.substring(1),o["on"+capEve]=q(a.type),n.addEventType(a)},q=function(a){var b=n.getCore();return k(function(b,c){void 0!==c&&(e=c);var d=e,f=function(){var a=n.getCore();e=d,b.apply(a?a():n,arguments)};s[e]=s[e]||[],s[e].push({name:a,func:f}),n.on(a,f)},b?b():n)},r=[],s={},t=function(a){var b;for(b=0;b<r.length;b+=1)if(r[b].name===a)return r[b];return!1},u=function(a,b){var c,d,f=!!t(a);if(e=a,f){if(!h)return l("PluginAlreadyExists",a),!1;for(c=0;c<r.length;c+=1)if(r[c].name===a){if(s[a])for(d=0;d<s[a].length;d+=1)n.off(s[a][d].name,s[a][d].func);return delete r[c].obj,r[c].obj=b,v(r[c]),r[c]}}else r.push({name:a,obj:b}),v(r[r.length-1]);return!0},v=function(a,b){var d=g["*"];if(b=void 0!==b?b:g[a.name],d){b=b||{};for(c in d)d.hasOwnProperty(c)&&(b.hasOwnProperty(c)||(b[c]=d[c]))}a.obj.apply(m({name:a.name}),[void 0!==b?b:{}])};if(this.registerEvent=p,this.add=u,this.trigger=k(n.trigger,n),b&&b.events)for(d=0;d<b.events.length;d+=1)p(b.events[d]);void 0!==b.config&&(f=b.config),void 0!==b.pluginConfig&&(g=b.pluginConfig),void 0!==b.pluginOverride&&(h=b.pluginOverride)};a.plugin=new b,a.PluginManager=b}(a),a=a||{},function(a){var b={get:function(a){var b=window.document.cookie.match(new RegExp(a+"=[^;]+($|;)","gi"));return b&&b[0]?window.unescape(b[0].substring(a.length+1,b[0].length).replace(";",""))||null:null},set:function(a,b,c){var d,e,f,g=[a+"="+window.escape(b)];return c=c||{},c.session||(d=isNaN(parseInt(c.days,10))?1:parseInt(c.days,10),e=new Date,f=1e3*60*60*24*d,e.setTime(e.getTime()+f),g.push("expires="+e.toGMTString())),c.path&&g.push("path="+c.path),c.domain&&g.push("domain="+c.domain),c.secure&&g.push("secure"),c.httponly&&g.push("httponly"),window.document.cookie=g.join("; ")},remove:function(a){this.get(a)&&this.set(a,"",{days:-1})}};a.cookie=b}(a)}(sole.ulib),function(a,b,c){var d,e,f,g,h=function(d){d=d||{};var g,i,j=this,k=[],l={maxLogSize:3e3,capture:!0,disable:!1,permtag:[],tag:[],passthrough:!1,useDate:!1,permanent:!1,cookieName:"solecfg"},m=!!a.console,n=new b.Pubsub({core:function(){return{sole:j}}}),o=function(){var a,b,c=arguments[0];for(a=1;a<arguments.length;a+=1)for(b in arguments[a])arguments[a].hasOwnProperty(b)&&(c[b]=arguments[a][b])},p=function(a){var b,c;for(b=0;b<a.length;b+=1)c=""+a[b],a[b]=c.replace(/[^a-zA-Z0-9]+/g,"");return a},q=function(a){var b=new RegExp("[-[\\]{}()*+?.,\\\\^$|#\\s]","g");return a?a.replace(b,"\\$&"):""},r=function(a,b){var c,d=!1;for("object"==typeof a&&a instanceof Array||(a=[a]),c=0;c<a.length;c+=1)j.hasTag(a[c])||(d=!0,k[a[c]]=0),k[a[c]]+=1;return d&&n.trigger(j.enums.events.tag,a,b),d};if(j.plugin=new b.PluginManager({pubsub:n,pluginConfig:{"*":{sole:j}}}),j.setArg=function(a,b){d[a]=b},j.getArg=function(a){return d[a]},j.enums={events:{tag:"tag",output:"output"}},j.clear=function(){return k=[],j.setMatches([]),j.tag(l.permtag)},j.getCfg=function(){return l},j.hasTag=function(a){var b,c=!1;for(b in k)if(k.hasOwnProperty(b)&&b===a){c=!0;break}return c},j.getTags=function(a){var b,c=!1;for(b in k)if(k.hasOwnProperty(b)&&b===a){c=!0;break}return c},j.on=function(){n.on.apply(n,arguments)},j.off=function(){n.off.apply(n,arguments)},j.passthrough=function(a){return a!==c&&(l.passthrough=!!a),!(!m||!l.passthrough)},j.tag=function(){var a,b,d,e,f=[],g=[];for(a=0;a<arguments.length;a+=1)if(e=arguments[a],e!==c)if("string"==typeof e&&(e=e.split(".")),e instanceof Array)for(b=0;b<e.length;b+=1)f.push(e[b]);else f.push(e);for(a=0;a<l.permtag.length;a+=1)g.push(l.permtag[a]);for(a=0;a<f.length;a+=1){for(d=!1,b=0;b<g.length;b+=1)if(g[b]==f[a]){d=!0;break}d||g.push(f[a])}return l.tag=g,r(l.tag),j},j.capture=function(a){return a!==c&&(l.capture=!!a),l.capture},j.disable=function(a){return a!==c&&(l.disable=!!a),l.disable},j.enable=function(){j.disable(!1)},j.shim=function(b,c,d){var e;return g=g||[],g.length>=l.maxLogSize&&g.splice(0,1),c=p(c),e={type:b,tags:c,args:d},l.useDate&&(e.time=new Date),r(c,e),l.capture&&g.push(e),j.setMatches(g),n.trigger(j.enums.events.output,e),this.passthrough()&&a.console[b].apply(a.console,d),j},j.filter=function(a){a=a||{};var b,d,e,f,h,i,k,m=[],n=[],o=a.tag||[],p=a.type||[],q=a.not||!1;if("string"==typeof a&&(o=[a]),"object"==typeof o&&o instanceof Array&&(o=a),"object"==typeof o&&o instanceof Array||(o=o!==c?[o]:o),"object"==typeof p&&p instanceof Array||(p=p!==c?[p]:p),o&&o.length>0||p&&p.length>0)for(e=0;e<g.length;e+=1){if(f=g[e],h=!0,i=!0,k=!0,o&&o.length>0){for(i=!1,b=0;b<o.length;b+=1)for(d=0;d<f.tags.length;d+=1)if(o[b]===f.tags[d]){i=!0;break}i||(h=!1)}if(p&&p.length>0){for(k=!1,h=!0,b=0;b<p.length;b+=1)if(p[b]===f.type){k=!0;break}k||(h=!1)}h&&(i||k)?m.push(f):n.push(f)}else m=g;return q?j.copy(l,n):j.copy(l,m)},j.glob=function(a){var b,c,d,e,f,g,h="__STARSEPARATOR__",i="__QUESTIONSEPARATOR__",k=[];for(a=a||"*",b=a.split("*").join(h),b=b.split("?").join(i),b=q(b),b="^"+b.split(h).join(".*").split(i).join(".")+"$",c=new RegExp(b),e=j.get(),d=0;d<e.length;d+=1)f=e[d],g=f.tags.join("."),c.test(g)&&k.push(f);return j.copy(l,k)},j.get=function(a){var b=g?g:[];return a?b[a]:b},j.setMatches=function(a){var b;if(g)for(b=0;b<g.length;b+=1)delete j[b];for(b=0;b<a.length;b+=1)j[b]=a[b];g=a,j.length=a.length},j.copy=function(a,b){var c=new this.constructor(a);return c.setMatches(b||g),c},j.init=function(a){a&&o(l,a),a.tag&&(l.permtag=a.tag,"object"==typeof l.permtag&&l.permtag instanceof Array||(l.permtag=[l.permtag])),l.permanent?b.cookie.set(l.cookieName,!0,{days:365}):b.cookie.remove(l.cookieName),b.cookie.get(l.cookieName)&&j.enable(),l.matches&&j.setMatches(l.matches)},j.addPluginManually=function(a,b){j.plugin.add(a,b)},j.noConflict=function(b){return e&&a.sole!==e&&(a.sole=e),b&&f&&a.Sole!==f&&(a.Sole=f),Sole},j.init(d),j.plugin.registerEvent({type:j.enums.events.output}),j.plugin.registerEvent({type:j.enums.events.tag}),h.pluginList&&h.pluginList.length>0)for(i=0;i<h.pluginList.length;i+=1)j.plugin.add(h.pluginList[i].type,h.pluginList[i].func)},i=["log","debug","info","warn","error","group","groupCollapsed"],j=["clear","dir","dirxml","trace","groupEnd","time","timeEnd","profile","profileEnd","count","table"],k=function(a){return function(){if(this.disable())return!1;var b,c,d,e=[],f="anonymous",g=f,h=this.getCfg().tag||[];for("object"==typeof e&&e instanceof Array||(e=[e]),"object"==typeof h&&h instanceof Array||(h=[h]),d=0;d<h.length;d+=1)e.push(h[d]);return this.getArg("useFuncTags")&&(b=arguments&&arguments.callee&&arguments.callee.caller?arguments.callee.caller.toString():null,c=/function\s*([\w\-$]+)?\s*\(/i,b&&(g=c.test(b)?RegExp.$1:"",""===g&&(g=f)),e.push(g)),this.shim(a,e,arguments)}},l=function(b){return function(){this.passthrough()&&a.console[b].apply(a.console,arguments)}};for(h.pluginList=[],h.plugin=function(a,b){h.pluginList.push({type:a,func:b}),d.addPluginManually(a,b)},g=0;g<i.length;g+=1)h.prototype[i[g]]=k(i[g]);for(g=0;g<j.length;g+=1)h.prototype[j[g]]=l(j[g]);return f=a.Sole,e=a.sole,d=new h,a.Sole=h,a.sole=d,d}(this,this.sole?this.sole.ulib:this.ulib||{});